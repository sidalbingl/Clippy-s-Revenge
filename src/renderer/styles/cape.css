/**
 * Spooky Cape Styling for Dark Clippy
 * Modern neon glow with flame-like animation
 */

.spooky-cape {
  position: absolute;
  top: 15%;
  left: 50%;
  transform: translateX(-50%);
  width: 140%;
  height: 120%;
  z-index: 0;
  pointer-events: none;
  
  /* Cape shape using clip-path */
  background: linear-gradient(
    180deg,
    rgba(255, 102, 0, 0.4) 0%,
    rgba(255, 69, 0, 0.5) 30%,
    rgba(255, 140, 0, 0.3) 60%,
    rgba(255, 165, 0, 0.2) 100%
  );
  
  clip-path: polygon(
    45% 0%,
    55% 0%,
    60% 10%,
    70% 20%,
    80% 40%,
    85% 60%,
    90% 80%,
    85% 100%,
    50% 95%,
    15% 100%,
    10% 80%,
    15% 60%,
    20% 40%,
    30% 20%,
    40% 10%
  );
  
  /* Neon glow effect */
  filter: drop-shadow(0 0 8px rgba(255, 102, 0, 0.8))
          drop-shadow(0 0 16px rgba(255, 69, 0, 0.6))
          drop-shadow(0 0 24px rgba(255, 140, 0, 0.4));
  
  /* Flowing animation */
  animation: capeFlow 4s cubic-bezier(0.45, 0.05, 0.55, 0.95) infinite,
             capeGlow 2s ease-in-out infinite alternate;
}

/* Cape flowing/waving animation */
@keyframes capeFlow {
  0%, 100% {
    transform: translateX(-50%) rotate(0deg) scaleY(1);
  }
  25% {
    transform: translateX(-48%) rotate(2deg) scaleY(1.02);
  }
  50% {
    transform: translateX(-50%) rotate(0deg) scaleY(1);
  }
  75% {
    transform: translateX(-52%) rotate(-2deg) scaleY(1.02);
  }
}

/* Glow pulsing animation */
@keyframes capeGlow {
  0% {
    filter: drop-shadow(0 0 8px rgba(255, 102, 0, 0.8))
            drop-shadow(0 0 16px rgba(255, 69, 0, 0.6))
            drop-shadow(0 0 24px rgba(255, 140, 0, 0.4));
  }
  100% {
    filter: drop-shadow(0 0 12px rgba(255, 102, 0, 1))
            drop-shadow(0 0 24px rgba(255, 69, 0, 0.8))
            drop-shadow(0 0 36px rgba(255, 140, 0, 0.6));
  }
}

/* Flame-like edge effect */
.spooky-cape::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    180deg,
    transparent 0%,
    rgba(255, 69, 0, 0.3) 50%,
    rgba(255, 140, 0, 0.4) 100%
  );
  clip-path: inherit;
  animation: flameFlicker 1.5s ease-in-out infinite;
}

/* Flame flickering effect */
@keyframes flameFlicker {
  0%, 100% {
    opacity: 0.6;
  }
  50% {
    opacity: 0.9;
  }
}

/* Enhanced glow for angry state */
.animate-glow .spooky-cape {
  animation: capeFlow 4s cubic-bezier(0.45, 0.05, 0.55, 0.95) infinite,
             capeGlowIntense 1s ease-in-out infinite alternate;
}

@keyframes capeGlowIntense {
  0% {
    filter: drop-shadow(0 0 16px rgba(255, 0, 0, 1))
            drop-shadow(0 0 32px rgba(255, 69, 0, 0.9))
            drop-shadow(0 0 48px rgba(255, 140, 0, 0.7));
  }
  100% {
    filter: drop-shadow(0 0 24px rgba(255, 0, 0, 1))
            drop-shadow(0 0 48px rgba(255, 69, 0, 1))
            drop-shadow(0 0 64px rgba(255, 140, 0, 0.9));
  }
}

/* Subtle shimmer effect */
.spooky-cape::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 200%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.1) 50%,
    transparent 100%
  );
  animation: shimmer 3s linear infinite;
}

@keyframes shimmer {
  0% {
    left: -100%;
  }
  100% {
    left: 100%;
  }
}

/* GPU acceleration for smooth performance */
.spooky-cape,
.spooky-cape::before,
.spooky-cape::after {
  will-change: transform, filter;
  backface-visibility: hidden;
  transform-style: preserve-3d;
}
